<!doctype html>
<html lang="ru">
<head>

    <link rel="stylesheet" type="text/css" href="/static/common_style/main.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/forms.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/table_styles.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/button.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/images.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/elements.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/menu.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/main_page.css">
    <link rel="stylesheet" type="text/css" href="/static/common_style/modal.css">

    <!--<link rel="stylesheet" type="text/css" href="/static/{{session['style']}}/table_styles.css">-->
    <!--<link rel="stylesheet" type="text/css" href="/static/{{session['style']}}/menu.css">-->
    <!--<link rel="stylesheet" type="text/css" href="/static/{{session['style']}}/main.css">

    <link rel="stylesheet" type="text/css" href="/static/{{session['style']}}/button.css">
    <link rel="stylesheet" type="text/css" href="/static/{{session['style']}}/images.css">-->
    {% block link_style %}{% endblock %}

    <!--<link rel="stylesheet" type="text/css" href="/static/{{session['style']}}/include.css">-->

    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <title>{% block title %}{% endblock %}</title>
    {% block javascript %}{% endblock %}
</head>
<body>

    <div id="global-modal-layer"></div>

    <common-container>
        <header id="scenario_FilterZone">
            <header-l style="font-size:20px">
                <img class="img-logo" src="/static/img/logo-g.ico"><a>&emsp;{{ res_value('APP_NAME') }},</a>
                <a style="margin-left:20px" id="scenarioLabel">
                    &emsp;Сценарий:
                    <span id="scenarioName">{{ session.get('name_scenario', '') }}</span>
                </a>
                <div class="dropdown"
                     data-role="menu-scenario"
                     data-url="/set-scenario"
                     data-target="calc_pens_mainBody"
                     style="min-width: 180px; margin-left: 20px">
                    <input type="hidden" name="menuValue" id="menuValue">
                    <button style="display: inline-block; border: 1px solid lightgray; min-width: 180px" type="button"
                            class="dropdown-button period-button"
                            id="menuButton">
                        <i class="fas fa-filter"></i>
                        <span class="label">{{ res_value('SELECT_SCENARIO') }}</span>
                        <span style="display: inline-block; margin-left: 5px;" class="caret"></span>
                    </button>
                    <div style="min-width: 248px;" class="dropdown-content">
                        <a data-value="work" data-label="{{res_value('WOKR_SCENARIO')}}"><i class="fas fa-home" style="margin-right: 10px;"></i>{{res_value('WOKR_SCENARIO')}}</a>
                        <a data-value="real" data-label="{{res_value('REAL_SCENARIO')}}"><i class="fas fa-envelope" style="margin-right: 10px;"></i>{{res_value('REAL_SCENARIO')}}</a>
                        <a data-value="optim" data-label="{{res_value('OPTIMISTIC_SCENARIO')}}"><i class="fas fa-envelope" style="margin-right: 10px;"></i>{{res_value('OPTIMISTIC_SCENARIO')}}</a>
                        <a data-value="pessimistic" data-label="{{res_value('PESSIMISTIC_SCENARIO')}}"><i class="fas fa-envelope" style="margin-right: 10px;"></i>{{res_value('PESSIMISTIC_SCENARIO')}}</a>
                    </div>
                </div>
            </header-l>

            <header-c>
                <!--<a class="nav_button" style="margin-left: 16px; padding: 6px 24px" href="https://tolem.gfss.kz">Tolem</a>-->
                <a class="nav_button" style="margin-left: 16px; padding: 6px 24px" href="http://qyzmetker:80">Qyzmetker</a>
                <a class="nav_button" style="margin-left: 16px; padding: 6px 24px" href="http://qyzmetker:8090">{{ res_value('PYTHON_REPORTS') }}</a>
                <a class="nav_button" style="margin-left: 16px; padding: 6px 24px" href="http://qyzmetker:8080">{{ res_value('PROVISION') }}</a>
            </header-c>
            <header-r>
                <div>
                    <a href="#" onclick="toggleTheme()">
                        <img id="theme-icon"
                             src="/static/img/dark-icon.png"
                             style="width: 24px; height: 24px; border-radius: 18px; margin: 2px 2px; vertical-align: middle;" />
                    </a>
                </div>
                {% if session['language'] == 'ru' %}
                <a class="nav_button" style="margin-left: 16px; padding: 6px 24px; min-width: 74px" href="/language/kz">ҚАЗ</a>
                {% else %}
                <a class="nav_button" style="margin-left: 16px; padding: 6px 24px; min-width: 74px" href="/language/ru">РУС</a>
                {% endif %}
            </header-r>
            <!--<script type="module" id="pageBaseScript" data-page="main_page" src="/static/js/base.js" defer></script>-->
        </header>

        <nav>
            {% if g.user.is_authenticated %}
            <a class="nav_button" href="/show_pens">{{ res_value('PENS_FOND') }}</a>
            <a class="nav_button" href="/show_base">{{ res_value('BASE_PENSION') }}</a>
            <a class="nav_button" href="/show_solidary">{{ res_value('BASE_SOLIDARY') }}</a>
            <a class="nav_button" href="/show_demography">{{ res_value('PAGE_DEMOGRAPHY') }}</a>
            <a class="nav_button" href="/reports">{{ res_value('LIST_REPORTS') }}</a>
            <a class="nav_button" href="/big_ref">{{ res_value('BIG_REF') }}</a>
            <a class="nav_button" href="/coeff_ref">{{ res_value('COEFF_REF') }}</a>
            <a class="nav_button" href="/logout">{{ res_value('LOGOUT_BUTTON') }}</a>
            {% else %}
            <a class="nav_button" href="/login">{{ res_value('LOGIN_BUTTON') }}</a>
            {% endif %}
            <p></p>
        </nav>

        <article_title>
            {% block main_title %}{% endblock %}
        </article_title>
        <article>
            {% block body %}{% endblock %}
        </article>

        <footer>
            <footer-l>
                <small>© 2021</small>
            </footer-l>
            <footer-r>
                <small style="visibility: hidden">{{ res_value('CREATORS') }}</small>
                <small style="visibility: hidden">{{ res_value('FOR_DEVELOPERS') }}</small>
                <a style="font-size:14px">{% if g.user.is_authenticated %} {{ g.user.full_name }} {% endif %}</a>
            </footer-r>
        </footer>
    </common-container>
    <script>
        const html = document.documentElement;
        // Загружаем сохранённую тему
        const saved = localStorage.getItem("theme");
        if (saved) { html.dataset.theme = saved; }

        function toggleTheme() {
            const newTheme = html.dataset.theme === "dark" ? "color" : "dark";
            html.dataset.theme = newTheme;
            localStorage.setItem("theme", newTheme);

            document.getElementById("theme-icon").src =
                newTheme === "dark"
                    ? "/static/img/color-icon.png"
                    : "/static/img/dark-icon.png";
        }
    </script>
</body>
</html>