<div class="scroll-x-y">
    <table style="border-collapse: collapse; width: max-content;">
        <thead>
            <tr>
                <th rowspan="2" class="my_stick"
                    style="top: 0px; max-width: 115px; white-space: normal;">
                    Год назначения
                </th>

                <th rowspan="2" style="top: 0px;"
                    class="my_stick">
                    Возраст
                </th>

                <th rowspan="2" style="top: 0px;"
                    class="my_stick">
                    Пол
                </th>

                {% for year in columns %}
                <th colspan="3" style="top: 0px;"
                    class="my_stick">
                    {{ year }}
                </th>
                {% endfor %}
            </tr>

            <tr style="height: 33px; line-height: 33px;">
                {% for year in columns %}
                <th class="my_stick" style="top: 32px;">
                    Количество
                </th>
                <th class="my_stick" style="top: 32px;">
                    Сумма
                </th>
                <th class="my_stick" style="top: 32px;">
                    Среднее
                </th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>
            {% for row in rows %}
            {% set sticky = 'line-height: 32px; top: 65px; height: 32px;'
            if loop.index0 == 0 else '' %}
            {% set stick_class = 'my_stick'
            if loop.index0 == 0 else '' %}
            <tr>
                <td class="{{ stick_class }}" style="{{ sticky }}">{{ row.pens_year }}</td>
                <td class="{{ stick_class }}" style="{{ sticky }}">{{ row.pens_age }}</td>
                <td class="{{ stick_class }}" style="{{ sticky }}">{{ row.sex }}</td>

                {% for year in columns %}
                <td class="{{ stick_class }}" style="{{ sticky }} white-space: nowrap; font-variant-numeric: tabular-nums; text-align: right; padding: 0px 6px 0px 10px">{{ row['cnt_' ~ year] }}</td>
                <td class="{{ stick_class }}" style="{{ sticky }} white-space: nowrap; font-variant-numeric: tabular-nums; text-align: right; padding: 0px 6px 0px 10px">{{ row['sum_' ~ year] }}</td>
                <td class="{{ stick_class }}" style="{{ sticky }} white-space: nowrap; font-variant-numeric: tabular-nums; text-align: right; padding: 0px 6px 0px 10px">{{ row['avg_' ~ year] }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
